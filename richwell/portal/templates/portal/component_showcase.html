{% extends "portal/base.html" %}

{% block title %}Component Showcase - Richwell School Portal{% endblock %}

{% block content %}
<div class="space-y-6">

    <!-- Page Header -->
    {% include "components/organisms/page_header.html" with title="Component Showcase" subtitle="Essential UI Components - Phase 2" %}

    <!-- Introduction -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-semibold mb-4">New Components Available</h3>
        <p class="text-gray-600 mb-4">
            This page demonstrates the new essential UI components added in Phase 2:
        </p>
        <ul class="list-disc list-inside space-y-2 text-gray-600">
            <li><strong>Modal/Dialog Organism</strong> - For confirmations, forms in overlays</li>
            <li><strong>Date Picker Molecule</strong> - For enrollment dates, term management</li>
            <li><strong>File Upload Molecule</strong> - For transcripts, documents with drag-and-drop</li>
        </ul>
    </div>

    <!-- Modal Examples -->
    <div class="bg-white rounded-lg shadow p-6" x-data="{
        confirmModal: false,
        formModal: false,
        largeModal: false,
        handleConfirm() {
            alert('Confirmed!');
            this.confirmModal = false;
        }
    }">
        <h3 class="text-xl font-semibold mb-4">Modal/Dialog Component</h3>
        <p class="text-gray-600 mb-4">Click the buttons below to see different modal variants:</p>

        <div class="flex flex-wrap gap-4">
            <!-- Confirmation Modal Trigger -->
            <button
                @click="confirmModal = true"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
            >
                Show Confirmation Modal
            </button>

            <!-- Form Modal Trigger -->
            <button
                @click="formModal = true"
                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"
            >
                Show Form Modal
            </button>

            <!-- Large Modal Trigger -->
            <button
                @click="largeModal = true"
                class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition"
            >
                Show Large Modal
            </button>
        </div>

        <!-- Confirmation Modal -->
        <div x-show="confirmModal" @open-modal-confirm.window="confirmModal = true" @close-modal-confirm.window="confirmModal = false">
            {% include "components/organisms/modal.html" with id="confirm" title="Confirm Action" size="sm" primary_button_text="Yes, Delete" secondary_button_text="Cancel" primary_button_action="handleConfirm()" %}
            <div x-show="confirmModal" style="display: none;">
                <script>
                    document.addEventListener('alpine:initialized', () => {
                        const modalContent = document.querySelector('#modal-confirm-content');
                        if (modalContent) {
                            modalContent.innerHTML = '<p class="text-gray-600">Are you sure you want to delete this item? This action cannot be undone.</p>';
                        }
                    });
                </script>
            </div>
        </div>

        <!-- Form Modal -->
        <div x-show="formModal" @open-modal-form.window="formModal = true" @close-modal-form.window="formModal = false">
            {% include "components/organisms/modal.html" with id="form" title="Add New Entry" size="md" primary_button_text="Save" secondary_button_text="Cancel" %}
            <div x-show="formModal" style="display: none;">
                <script>
                    document.addEventListener('alpine:initialized', () => {
                        const modalContent = document.querySelector('#modal-form-content');
                        if (modalContent) {
                            modalContent.innerHTML = `
                                <form class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Name</label>
                                        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter name">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                        <textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter description"></textarea>
                                    </div>
                                </form>
                            `;
                        }
                    });
                </script>
            </div>
        </div>

        <!-- Large Modal -->
        <div x-show="largeModal" @open-modal-large.window="largeModal = true" @close-modal-large.window="largeModal = false">
            {% include "components/organisms/modal.html" with id="large" title="Large Content Modal" size="lg" primary_button_text="Done" show_footer=False %}
            <div x-show="largeModal" style="display: none;">
                <script>
                    document.addEventListener('alpine:initialized', () => {
                        const modalContent = document.querySelector('#modal-large-content');
                        if (modalContent) {
                            modalContent.innerHTML = `
                                <div class="prose max-w-none">
                                    <h4>Large Modal Content</h4>
                                    <p>This is a large modal that can contain extensive content like detailed forms, data tables, or rich text content.</p>
                                    <p>The modal supports multiple sizes: sm (400px), md (600px), lg (800px), xl (1000px), and full (95vw).</p>
                                    <h5>Features:</h5>
                                    <ul>
                                        <li>Responsive design</li>
                                        <li>Keyboard navigation (ESC to close)</li>
                                        <li>Click outside to dismiss (optional)</li>
                                        <li>Smooth animations</li>
                                        <li>Accessible (ARIA attributes)</li>
                                    </ul>
                                </div>
                            `;
                        }
                    });
                </script>
            </div>
        </div>
    </div>

    <!-- Date Picker Examples -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-semibold mb-4">Date Picker Component</h3>
        <p class="text-gray-600 mb-4">Date picker with calendar icon and validation:</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Basic Date Picker -->
            {% include "components/molecules/date_picker.html" with label="Start Date" name="start_date" required=True help_text="Select the start date for the term" %}

            <!-- Date Picker with Min/Max -->
            {% include "components/molecules/date_picker.html" with label="End Date" name="end_date" min_date="2025-01-01" max_date="2025-12-31" help_text="Must be within 2025" %}

            <!-- Disabled Date Picker -->
            {% include "components/molecules/date_picker.html" with label="Locked Date" name="locked_date" value="2025-06-15" disabled=True help_text="This date is locked and cannot be changed" %}

            <!-- Date Picker with Error -->
            {% include "components/molecules/date_picker.html" with label="Birth Date" name="birth_date" error="Please enter a valid birth date" %}
        </div>

        <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h4 class="font-semibold text-blue-900 mb-2">Usage Examples:</h4>
            <div class="text-sm text-blue-800 space-y-1 font-mono">
                <p>{% verbatim %}{% include "components/molecules/date_picker.html" with label="Start Date" name="start_date" required=True %}{% endverbatim %}</p>
                <p>{% verbatim %}{% include "components/molecules/date_picker.html" with label="End Date" name="end_date" min_date="2025-01-01" %}{% endverbatim %}</p>
            </div>
        </div>
    </div>

    <!-- File Upload Examples -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-semibold mb-4">File Upload Component</h3>
        <p class="text-gray-600 mb-4">Drag-and-drop file upload with preview and validation:</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Single File Upload (Image) -->
            {% include "components/molecules/file_upload.html" with label="Profile Picture" name="avatar" accept="image/*" max_size_mb=5 help_text="Upload a profile picture (max 5MB)" %}

            <!-- Multiple File Upload (Documents) -->
            {% include "components/molecules/file_upload.html" with label="Supporting Documents" name="documents" multiple=True accept=".pdf,.doc,.docx" max_size_mb=10 help_text="Upload transcripts, certificates, etc." %}

            <!-- File Upload with Current File -->
            {% include "components/molecules/file_upload.html" with label="Transcript" name="transcript" accept=".pdf" current_file="transcript_2024.pdf" help_text="Replace existing transcript" %}

            <!-- File Upload with Error -->
            {% include "components/molecules/file_upload.html" with label="Required Document" name="req_doc" required=True error="Please upload a valid document" %}
        </div>

        <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h4 class="font-semibold text-blue-900 mb-2">Features:</h4>
            <ul class="text-sm text-blue-800 space-y-1 list-disc list-inside">
                <li>Drag and drop or click to browse</li>
                <li>Image preview for uploaded images</li>
                <li>File size validation</li>
                <li>Multiple file support</li>
                <li>File type restrictions</li>
                <li>Remove uploaded files before submission</li>
            </ul>
        </div>
    </div>

    <!-- Usage Guide -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-xl font-semibold mb-4">Implementation Guide</h3>

        <div class="space-y-6">
            <!-- Modal Usage -->
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">Modal/Dialog</h4>
                <pre class="bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>&lt;div x-data="{ showModal: false }"&gt;
  &lt;button @click="showModal = true"&gt;Open Modal&lt;/button&gt;

  &lt;div x-show="showModal"&gt;
    {% verbatim %}{% include "components/organisms/modal.html" with
      id="myModal"
      title="Modal Title"
      size="md"
      primary_button_text="Confirm"
      secondary_button_text="Cancel"
    %}{% endverbatim %}
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
            </div>

            <!-- Date Picker Usage -->
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">Date Picker</h4>
                <pre class="bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>{% verbatim %}{% include "components/molecules/date_picker.html" with
  label="Event Date"
  name="event_date"
  required=True
  min_date="2025-01-01"
  help_text="Select event date"
%}{% endverbatim %}</code></pre>
            </div>

            <!-- File Upload Usage -->
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">File Upload</h4>
                <pre class="bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>{% verbatim %}{% include "components/molecules/file_upload.html" with
  label="Upload Document"
  name="document"
  accept=".pdf"
  max_size_mb=10
  help_text="Upload PDF only"
%}{% endverbatim %}</code></pre>
            </div>
        </div>
    </div>

</div>
{% endblock %}
