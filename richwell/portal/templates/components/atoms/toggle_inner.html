{# Toggle Switch Inner Component - Handles rendering logic #}

<div class="flex items-center"
     x-data="{ enabled: {{ toggle_checked|yesno:'true,false' }} }">

    {# Hidden input for form submission #}
    <input
        type="hidden"
        name="{{ name }}"
        :value="enabled ? 'on' : 'off'"
    >

    {# Toggle button #}
    <button
        type="button"
        @click="enabled = !enabled"
        :class="enabled ? 'bg-blue-600' : 'bg-gray-200'"
        {% if toggle_disabled %}disabled{% endif %}
        class="{{ toggle_width }} {{ toggle_height }} relative inline-flex flex-shrink-0 border-2 border-transparent rounded-full
               cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
               {% if toggle_disabled %}opacity-50 cursor-not-allowed{% endif %}"
        role="switch"
        :aria-checked="enabled.toString()"
        aria-labelledby="{{ toggle_id }}_label"
    >
        <span class="sr-only">{{ label|default:"Toggle" }}</span>

        {# Toggle dot #}
        <span
            :class="enabled ? '{{ dot_translate }}' : 'translate-x-0'"
            class="{{ dot_size }} inline-block transform bg-white rounded-full shadow ring-0 transition ease-in-out duration-200"
        ></span>
    </button>

    {# Label and description #}
    {% if label or on_label or off_label %}
    <div class="ml-3">
        {% if label %}
        <span id="{{ toggle_id }}_label" class="text-sm font-medium text-gray-700 {% if toggle_disabled %}opacity-50{% endif %}">
            {{ label }}
        </span>
        {% endif %}

        {% if on_label or off_label %}
        <span class="text-sm text-gray-500 ml-2">
            <span x-show="enabled">{{ on_label }}</span>
            <span x-show="!enabled">{{ off_label }}</span>
        </span>
        {% endif %}

        {% if description %}
        <p class="text-xs text-gray-500 mt-1">{{ description }}</p>
        {% endif %}
    </div>
    {% endif %}
</div>
