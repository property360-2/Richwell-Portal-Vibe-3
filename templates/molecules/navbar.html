<nav class="bg-indigo-600 text-white px-6 py-3 flex justify-between items-center">
  <span class="font-semibold">Richwell College Portal</span>
  <button id="logoutBtn" class="bg-white text-indigo-700 px-4 py-2 rounded-lg hover:bg-gray-100">
    Logout
  </button>
</nav>

<script>
  document.getElementById("logoutBtn").addEventListener("click", async () => {
    // Grab refresh token (for blacklist)
    const refresh = localStorage.getItem("refresh");

    try {
      if (refresh) {
        await fetch("/auth/logout/", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ refresh }),
        });
      }

      // Clear local tokens (client-side logout)
      localStorage.clear();

      // Kill Django session by hitting /logout/
      await fetch("/logout/", { method: "GET" });

      // Redirect back to login page
      window.location.href = "/";
    } catch (err) {
      console.error("Logout failed:", err);
      window.location.href = "/";
    }
  });
</script>
